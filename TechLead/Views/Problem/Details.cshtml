@using Microsoft.AspNet.Identity;
@model TechLead.Models.ExerciseViewModel

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="Content">
    <div class="TitleBox">
        <div class="row">
            <div class="col-md-8"> <h2><b>@Html.DisplayFor(ex => ex.Name)</b></h2></div>

            <div class="col-md-4">
                <div class="pull-right">
                    @switch (Model.DifficultyId)
                    {
                        case 4:<p class="alert alert-success" role="alert">Beginner  <span class="badge badge-light">@Html.DisplayFor(ex => ex.Points)</span></p>break;
                    case 5:<p class="alert alert-warning">Intermediate  <span class="badge badge-light">@Html.DisplayFor(ex => ex.Points)</span></p>break;
                case 6:<p class="alert alert-danger">Advanced <span class="badge badge-light">@Html.DisplayFor(ex => ex.Points)</span></p>break;
        }
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 pull-left">
                @if (Model.AuthorID != null)
                {

                    <p>Author: @Html.ActionLink(Model.Author, "ViewProfile", "Profile", new { userID = Model.AuthorID }, null)</p>
                }
                else
                {
                    <p>Author: Anonymous</p>
                }
                <p style="font-size: 15px">Problem ID: @Model.Id</p>
            </div>
            <div class="col-lg-6">
                @if (User.Identity.IsAuthenticated && (User.Identity.GetUserId() == Model.AuthorID || User.IsInRole("Administrator")))
                {
                    <span class="btn-group pull-right">@Html.ActionLink("Update", "Update", "Problem", new { @ProblemID = Model.Id }, new { @class = "btn btn-info" })@Html.ActionLink("Delete", "Delete", "Problem", new { @ProblemID = Model.Id, }, new { @class = "btn btn-info" })</span>
                    if (Model.MakeItPublic == false)
                    {
                        <span class="pull-right">@Html.ActionLink("Make it public", "MakeItPublic", "Problem", new { problemId = Model.Id }, null)</span>
                    }
                }
            </div>
        </div>
    </div>
    @using (Html.BeginForm("Details", "Problem", FormMethod.Post,
        new { enctype = "multipart/form-data" }))
    {

        <div class="Box">
            <br />

            <p><strong>Condition</strong></p>
            <span> @Html.DisplayFor(ex => ex.Condition)</span>
            <br /><br /><br />

            <p><strong>Input Format</strong></p>
            <span> @Html.DisplayFor(ex => ex.InputFormat)</span>
            <br /><br /><br />

            <p><strong>Constraints</strong></p>
            <span> @Html.DisplayFor(ex => ex.Constraints)</span>
            <br /><br /><br />

            <p><strong>Output Format</strong></p>
            <span> @Html.DisplayFor(ex => ex.OutputFormat)</span>
            <br /><br /><br />

            <p><strong> Test case</strong></p>
            <div class="row">
                <div class="col-md-6">
                    <div class="IOContainer">
                        <b>Input</b>
                        <hr />
                        @Html.DisplayFor(ex => ex.Input1)
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="IOContainer">
                        <b>Output</b>
                        <hr />
                        @Html.DisplayFor(ex => ex.Output1)
                    </div>
                </div>
            </div>

            <br />
            <p><strong>Explanation</strong></p>
            <span> @Html.DisplayFor(ex => ex.Explanation1)</span>
            <br /><br /><br />

            @if (Model.Input2 != null)
            {
                <p><strong> Test case</strong></p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Input</b>
                            <hr />
                            <span>@Html.DisplayFor(ex => ex.Input2) </span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Output</b>
                            <hr />
                            <span> @Html.DisplayFor(ex => ex.Output2)</span>
                        </div>
                    </div>
                </div>

                <br />
                <p><strong>Explanation</strong></p>
                <span> @Html.DisplayFor(ex => ex.Explanation2)</span>
                <br /><br /><br />

            }

            @if (Model.Input3 != null)
            {
                <p><strong> Test case</strong></p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Input</b>
                            <hr />
                            <span>@Html.DisplayFor(ex => ex.Input3) </span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Output</b>
                            <hr />
                            <span>  @Html.DisplayFor(ex => ex.Output3)</span>
                        </div>
                    </div>
                </div>

                <br />
                <p><strong>Explanation</strong></p>
                <span> @Html.DisplayFor(ex => ex.Explanation3)</span>
                <br /><br /><br />
            }

            @if (Model.Input4 != null)
            {
                <p><strong> Test case</strong></p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Input</b>
                            <hr />
                            <span> @Html.DisplayFor(ex => ex.Input4)</span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Output</b>
                            <hr />
                            <span> @Html.DisplayFor(ex => ex.Output4)</span>
                        </div>
                    </div>
                </div>

                <br />
                <p><strong>Explanation</strong></p>
                <span> @Html.DisplayFor(ex => ex.Explanation4)</span>
                <br /><br /><br />
            }

            @if (Model.Input5 != null)
            {
                <p><strong> Test case</strong></p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Input</b>
                            <hr />
                            <span>@Html.DisplayFor(ex => ex.Input5) </span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="IOContainer">
                            <b>Output</b>
                            <hr />
                            <span>@Html.DisplayFor(ex => ex.Output5) </span>
                        </div>
                    </div>
                </div>
                <br />
                <p><strong>Explanation</strong></p>
                <span> @Html.DisplayFor(ex => ex.Explanation5)</span>
            }
            <hr />
            <div class="fileUpload">
                <p><strong>Submit your solution here </strong></p>
                <br />

                <input type="file" name="file" id="real-imput" />
                <br />
                @Html.CheckBoxFor(m => m.MakeSourceCodePublic)
                @Html.LabelFor(m => m.MakeSourceCodePublic)
                @*@Html.DisplayTextFor(m => m.MakeSourceCodePublic)*@
                <br />
                <input type="submit" value="Submit" />
            </div>
        </div>
    }
    <div class="TitleBox">
        @if (Model.ClassId != null)
        {
            <a href="@Url.Action("SubmissionsWithinClass", "Problem", new { exerciseId = Model.Id, restrictedMode = Model.RestrictedMode, classId = Model.ClassId })" class="elements">Submissions</a>
        }
        else
        {
            <a href="@Url.Action("Submissions", "Problem", new { exerciseId = Model.Id, restrictedMode = Model.RestrictedMode })" class="elements">Submissions</a>
        }


    </div>
</div>
