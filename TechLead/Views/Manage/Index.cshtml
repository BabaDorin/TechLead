@model TechLead.Models.IndexViewModel
@{
    ViewBag.Title = "Manage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="Content">
    <div class="Box">
        <div class="row">
            <div class="col-md-2">
                <div class="ProfilePhoto">
                    <img src="https://is3-ssl.mzstatic.com/image/thumb/Purple128/v4/06/de/f3/06def323-ee28-c20d-6134-233989884965/AppIcon-1x_U007emarketing-85-220-3.jpeg/246x0w.jpg" />
                </div>
                <br />
            </div>
            <div class="col-md-10">
                <div class="ProfileInformation" id="ProfileInformation">
                    <div class="row">
                        <div class="columnInfo">
                            <p><strong>UserName:</strong> @Model.UserName</p>
                            <p><strong>Email:</strong><span style="color:#ff6a00"> @Model.Email</span></p>
                            <p>
                                <strong>Job:</strong> @if (Model.Job == null)
                                {
                                    <span> none</span>
                                }
                                else
                                {
                                    <span>@Model.Job</span>
                                }
                            </p>
                            <div class="ProfileInformation">
                                <p><input id="buttonOpenInfoEdit" type="button" onclick="openInfoEdit()" value="Edit Info" /></p>
                            </div>
                        </div>
                        <div class="columnInfo">
                            <p>
                                <strong>Phone Number:</strong> @if (Model.PhoneNumber == null)
                                {
                                    <span> none</span>
                                }
                                else
                                {
                                    <span>@Model.PhoneNumber</span>
                                }
                            </p>
                            <p><strong>Here since </strong>   @Model.FirstRegistration.ToString("MMM d yyyy")</p>
                        </div>
                    </div>
                </div>
                <div id="ProfileInformationEdit" style="display:none">
                    @using (Html.BeginForm("IndexUpdateInfo", "Manage", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken();
                        <div class="row">
                            <div class="columnInfo">
                                <p><strong>UserName:</strong> @Html.TextBoxFor(u => u.UserName, new { @class = "form-control", @value = Model.UserName })</p>
                                <p><strong>Email:</strong> @Html.TextBoxFor(u => u.Email, new { @class = "form-control", @value = Model.Email })</p>
                                <p><strong>Job: </strong> @Html.TextBoxFor(u => u.Job, new { @class = "form-control", @value = Model.Job })</p>
                                <div class="col-md-2">
                                    <input id="buttonSubmitInfoEdit" type="submit" value="Save" />
                                </div>
                                <div class="col-md-2">
                                    <div class="ProfileInformation">
                                        <p><input id="buttonOpenInfoEdit" type="button" onclick="openInfoEdit()" value="Back" /></p>
                                    </div>
                                </div>
                            </div>
                            <div class="columnInfo">
                                <p><strong>Phone number: </strong> @Html.TextBoxFor(u => u.PhoneNumber, new { @class = "form-control", @value = Model.PhoneNumber })</p>
                                <p><strong>Here since </strong>   @Model.FirstRegistration.ToString("MM / dd / yyyy")</p>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="Box">
        <div class="About">
            <p><strong>About</strong></p>
            @if (Model.About == null)
            {
                using (Html.BeginForm("IndexUpdateAbout", "Manage", FormMethod.Post))
                {
                    @Html.AntiForgeryToken();
                    <p><input type="button" onclick="openAbout()" value="Add Info" /></p>
                    <div id="AboutDiv" style="display:none;">
                        @Html.TextAreaFor(u => u.About, new { @class = "form-control", @rows = "6", @style = "width:100%; overflow:auto; max-width:100%;" })
                        @Html.ValidationMessage("CustomError")
                        <input type="submit" value="Save" />
                    </div>

                }

            }
            else
            {
                using (Html.BeginForm("IndexUpdateAbout", "Manage", FormMethod.Post))
                {
                    @Html.AntiForgeryToken();
                    <p><input type="button" onclick="openAbout()" value="Edit" /></p>
                    <div id="AboutDiv" style="display:none;">
                        @Html.TextAreaFor(u => u.About, new { @class = "form-control", @rows = "6", @style = "width:100%; overflow:auto; max-width:100%;" })
                        @Html.ValidationMessage("CustomError")
                        <input type="submit" value="Save" />
                    </div>
                }

                <div id="InfoAbout">
                    <span>@Html.DisplayFor(u => u.About)</span>
                </div>
            }
        </div>
        <br />
        <div class="ExercisesByUser">
            <p>Exercises created by Andrew:</p>
            <p>The list is empty</p>
        </div>
    </div>
    <br /><br />



    @*<p class="text-success">@ViewBag.StatusMessage</p>
        <div>
            <h4>Change your account settings</h4>
            <hr />
            <dl class="dl-horizontal">
                <dt>Password:</dt>
                <dd>
                    [
                    @if (Model.HasPassword)
                    {
                        @Html.ActionLink("Change your password", "ChangePassword")
                    }
                    else
                    {
                        @Html.ActionLink("Create", "SetPassword")
                    }
                    ]
                </dd>
                <dt>External Logins:</dt>
                <dd>
                    @Model.Logins.Count [
                    @Html.ActionLink("Manage", "ManageLogins") ]
                </dd>*@
    @*
        Phone Numbers can used as a second factor of verification in a two-factor authentication system.

         See <a href="https://go.microsoft.com/fwlink/?LinkId=403804">this article</a>
            for details on setting up this ASP.NET application to support two-factor authentication using SMS.

         Uncomment the following block after you have set up two-factor authentication
    *@
    @*
                <dt>Phone Number:</dt>
                <dd>
                    @(Model.PhoneNumber ?? "None")
                    @if (Model.PhoneNumber != null)
                    {
                        <br />
                        <text>[&nbsp;&nbsp;@Html.ActionLink("Change", "AddPhoneNumber")&nbsp;&nbsp;]</text>
                        using (Html.BeginForm("RemovePhoneNumber", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>[<input type="submit" value="Remove" class="btn-link" />]</text>
                        }
                    }
                    else
                    {
                        <text>[&nbsp;&nbsp;@Html.ActionLink("Add", "AddPhoneNumber")
                    }
                </dd>

                <dt>Two-Factor Authentication:</dt>
                <dd>
                    <p>
                        There are no two-factor authentication providers configured. See <a href="https://go.microsoft.com/fwlink/?LinkId=403804">this article</a>
                        for details on setting up this ASP.NET application to support two-factor authentication.
                    </p>
                    @if (Model.TwoFactor)
                    {
                        using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>Enabled
                            <input type="submit" value="Disable" class="btn btn-link" />
                            </text>
                        }
                    }
                    else
                    {
                        using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>Disabled
                            <input type="submit" value="Enable" class="btn btn-link" />
                            </text>
                        }
                    }
                </dd>
            </dl>
        </div>
    *@
</div>
<script type="text/javascript">
    function openAbout() {
        var x = document.getElementById("AboutDiv");
        var y = document.getElementById("InfoAbout");
        if (x.style.display === "none") {
            x.style.display = "block";
            y.style.display = "none";
        } else {
            x.style.display = "none";
            y.style.display = "block";
        }
    }

    function openInfoEdit() {
        var x = document.getElementById("ProfileInformationEdit");
        var y = document.getElementById("ProfileInformation");
        var z = document.getElementById("buttonOpenInfoEdit");
        if (x.style.display == "none") {
            x.style.display = "block";
            y.style.display = "none";
        } else {
            x.style.display = "none";
            y.style.display = "block";
        }
    }
</script>